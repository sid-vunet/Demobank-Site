version: '3.8'

services:
  # UCO Bank Finacle Application
  finacle-app:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: uco-finacle
    ports:
      - "8080:8080"
    environment:
      - DB_HOST=10.1.92.130
      - DB_PORT=1521
      - DB_SERVICE=XEPDB1
      - DB_USERNAME=system
      - DB_PASSWORD=Oracle123!
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8080/finacle/fininfra/ui/SSOLogin.jsp"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 60s

# To use with a local Oracle database container, uncomment below:
#  oracle-db:
#    image: gvenzl/oracle-xe:21-slim
#    container_name: oracle-xe
#    ports:
#      - "1521:1521"
#    environment:
#      - ORACLE_PASSWORD=Oracle123!
#    volumes:
#      - oracle-data:/opt/oracle/oradata
#    healthcheck:
#      test: ["CMD", "healthcheck.sh"]
#      interval: 30s
#      timeout: 10s
#      retries: 5
#      start_period: 120s
#
#volumes:
#  oracle-data:
